import{C as P,R as z,O as C,P as F,z as O,g as L,l as q,w as _,y as m,G as M,H as R,I as v,D as I,A as T}from"./tsparticles-engine-DLgpyJd2.js";class W extends P{constructor(i,n,e,t){super(i,n,e),this.canvasSize=t,this.canvasSize={...t}}contains(i){const{width:n,height:e}=this.canvasSize,{x:t,y:s}=i;return super.contains(i)||super.contains({x:t-n,y:s})||super.contains({x:t-n,y:s-e})||super.contains({x:t,y:s-e})}intersects(i){if(super.intersects(i))return!0;const n=i,e=i,t={x:i.position.x-this.canvasSize.width,y:i.position.y-this.canvasSize.height};if(e.radius!==void 0){const s=new P(t.x,t.y,e.radius*2);return super.intersects(s)}else if(n.size!==void 0){const s=new z(t.x,t.y,n.size.width*2,n.size.height*2);return super.intersects(s)}return!1}}class E{constructor(){this.blur=5,this.color=new C,this.color.value="#000",this.enable=!1}load(i){i&&(i.blur!==void 0&&(this.blur=i.blur),this.color=C.create(this.color,i.color),i.enable!==void 0&&(this.enable=i.enable))}}class B{constructor(){this.enable=!1,this.frequency=1}load(i){i&&(i.color!==void 0&&(this.color=C.create(this.color,i.color)),i.enable!==void 0&&(this.enable=i.enable),i.frequency!==void 0&&(this.frequency=i.frequency),i.opacity!==void 0&&(this.opacity=i.opacity))}}class j{constructor(){this.blink=!1,this.color=new C,this.color.value="#fff",this.consent=!1,this.distance=100,this.enable=!1,this.frequency=1,this.opacity=1,this.shadow=new E,this.triangles=new B,this.width=1,this.warp=!1}load(i){i&&(i.id!==void 0&&(this.id=i.id),i.blink!==void 0&&(this.blink=i.blink),this.color=C.create(this.color,i.color),i.consent!==void 0&&(this.consent=i.consent),i.distance!==void 0&&(this.distance=i.distance),i.enable!==void 0&&(this.enable=i.enable),i.frequency!==void 0&&(this.frequency=i.frequency),i.opacity!==void 0&&(this.opacity=i.opacity),this.shadow.load(i.shadow),this.triangles.load(i.triangles),i.width!==void 0&&(this.width=i.width),i.warp!==void 0&&(this.warp=i.warp))}}function A(c,i,n,e,t){const{dx:s,dy:o,distance:l}=L(c,i);if(!t||l<=n)return l;const f={x:Math.abs(s),y:Math.abs(o)},u={x:Math.min(f.x,e.width-f.x),y:Math.min(f.y,e.height-f.y)};return Math.sqrt(u.x**2+u.y**2)}class G extends F{constructor(i){super(i),this._setColor=n=>{if(!n.options.links)return;const e=this.linkContainer,t=n.options.links;let s=t.id===void 0?e.particles.linksColor:e.particles.linksColors.get(t.id);if(s)return;const o=t.color;s=O(o,t.blink,t.consent),t.id===void 0?e.particles.linksColor=s:e.particles.linksColors.set(t.id,s)},this.linkContainer=i}clear(){}init(){this.linkContainer.particles.linksColor=void 0,this.linkContainer.particles.linksColors=new Map}async interact(i){if(!i.options.links)return;i.links=[];const n=i.getPosition(),e=this.container,t=e.canvas.size;if(n.x<0||n.y<0||n.x>t.width||n.y>t.height)return;const s=i.options.links,o=s.opacity,l=i.retina.linksDistance??0,f=s.warp,u=f?new W(n.x,n.y,l,t):new P(n.x,n.y,l),g=e.particles.quadTree.query(u);for(const a of g){const d=a.options.links;if(i===a||!(d!=null&&d.enable)||s.id!==d.id||a.spawning||a.destroyed||!a.links||i.links.some(k=>k.destination===a)||a.links.some(k=>k.destination===i))continue;const r=a.getPosition();if(r.x<0||r.y<0||r.x>t.width||r.y>t.height)continue;const h=A(n,r,l,t,f&&d.warp);if(h>l)continue;const w=(1-h/l)*o;this._setColor(i),i.links.push({destination:a,opacity:w})}}isEnabled(i){var n;return!!((n=i.options.links)!=null&&n.enable)}loadParticlesOptions(i,...n){i.links||(i.links=new j);for(const e of n)i.links.load((e==null?void 0:e.links)??(e==null?void 0:e.lineLinked)??(e==null?void 0:e.line_linked))}reset(){}}async function H(c,i=!0){await c.addInteractor("particlesLinks",n=>new G(n),i)}function K(c){let i=!1;const{begin:n,end:e,maxDistance:t,context:s,canvasSize:o,width:l,backgroundMask:f,colorLine:u,opacity:g,links:a}=c;if(q(n,e)<=t)_(s,n,e),i=!0;else if(a.warp){let r,h;const w={x:e.x-o.width,y:e.y},k=L(n,w);if(k.distance<=t){const y=n.y-k.dy/k.dx*n.x;r={x:0,y},h={x:o.width,y}}else{const y={x:e.x,y:e.y-o.height},p=L(n,y);if(p.distance<=t){const x=-(n.y-p.dy/p.dx*n.x)/(p.dy/p.dx);r={x,y:0},h={x,y:o.height}}else{const b={x:e.x-o.width,y:e.y-o.height},x=L(n,b);if(x.distance<=t){const D=n.y-x.dy/x.dx*n.x;r={x:-D/(x.dy/x.dx),y:D},h={x:r.x+o.width,y:r.y+o.height}}}}r&&h&&(_(s,n,r),_(s,e,h),i=!0)}if(!i)return;s.lineWidth=l,f.enable&&(s.globalCompositeOperation=f.composite),s.strokeStyle=m(u,g);const{shadow:d}=a;if(d.enable){const r=M(d.color);r&&(s.shadowBlur=d.blur,s.shadowColor=m(r))}s.stroke()}function N(c){const{context:i,pos1:n,pos2:e,pos3:t,backgroundMask:s,colorTriangle:o,opacityTriangle:l}=c;R(i,n,e,t),s.enable&&(i.globalCompositeOperation=s.composite),i.fillStyle=m(o,l),i.fill()}function V(c){return c.sort((i,n)=>i-n),c.join("_")}function S(c,i){const n=V(c.map(t=>t.id));let e=i.get(n);return e===void 0&&(e=v(),i.set(n,e)),e}class J{constructor(i){this.container=i,this._drawLinkLine=(n,e)=>{const t=n.options.links;if(!(t!=null&&t.enable))return;const s=this.container,o=s.actualOptions,l=e.destination,f=n.getPosition(),u=l.getPosition();let g=e.opacity;s.canvas.draw(a=>{var y;let d;const r=(y=n.options.twinkle)==null?void 0:y.lines;if(r!=null&&r.enable){const p=r.frequency,b=M(r.color);v()<p&&b&&(d=b,g=I(r.opacity))}if(!d){const p=t.id!==void 0?s.particles.linksColors.get(t.id):s.particles.linksColor;d=T(n,l,p)}if(!d)return;const h=n.retina.linksWidth??0,w=n.retina.linksDistance??0,{backgroundMask:k}=o;K({context:a,width:h,begin:f,end:u,maxDistance:w,canvasSize:s.canvas.size,links:t,backgroundMask:k,colorLine:d,opacity:g})})},this._drawLinkTriangle=(n,e,t)=>{const s=n.options.links;if(!(s!=null&&s.enable))return;const o=s.triangles;if(!o.enable)return;const l=this.container,f=l.actualOptions,u=e.destination,g=t.destination,a=o.opacity??(e.opacity+t.opacity)/2;a<=0||l.canvas.draw(d=>{const r=n.getPosition(),h=u.getPosition(),w=g.getPosition(),k=n.retina.linksDistance??0;if(q(r,h)>k||q(w,h)>k||q(w,r)>k)return;let y=M(o.color);if(!y){const p=s.id!==void 0?l.particles.linksColors.get(s.id):l.particles.linksColor;y=T(n,u,p)}y&&N({context:d,pos1:r,pos2:h,pos3:w,backgroundMask:f.backgroundMask,colorTriangle:y,opacityTriangle:a})})},this._drawTriangles=(n,e,t,s)=>{var f,u,g;const o=t.destination;if(!((f=n.links)!=null&&f.triangles.enable&&((u=o.options.links)!=null&&u.triangles.enable)))return;const l=(g=o.links)==null?void 0:g.filter(a=>{const d=this._getLinkFrequency(o,a.destination);return o.options.links&&d<=o.options.links.frequency&&s.findIndex(r=>r.destination===a.destination)>=0});if(l!=null&&l.length)for(const a of l){const d=a.destination;this._getTriangleFrequency(e,o,d)>n.links.triangles.frequency||this._drawLinkTriangle(e,t,a)}},this._getLinkFrequency=(n,e)=>S([n,e],this._freqs.links),this._getTriangleFrequency=(n,e,t)=>S([n,e,t],this._freqs.triangles),this._freqs={links:new Map,triangles:new Map}}drawParticle(i,n){const{links:e,options:t}=n;if(!e||e.length<=0)return;const s=e.filter(o=>t.links&&this._getLinkFrequency(n,o.destination)<=t.links.frequency);for(const o of s)this._drawTriangles(t,n,o,s),o.opacity>0&&(n.retina.linksWidth??0)>0&&this._drawLinkLine(n,o)}async init(){this._freqs.links=new Map,this._freqs.triangles=new Map}particleCreated(i){if(i.links=[],!i.options.links)return;const n=this.container.retina.pixelRatio,{retina:e}=i,{distance:t,width:s}=i.options.links;e.linksDistance=t*n,e.linksWidth=s*n}particleDestroyed(i){i.links=[]}}class Q{constructor(){this.id="links"}getPlugin(i){return new J(i)}loadOptions(){}needsPlugin(){return!0}}async function U(c,i=!0){const n=new Q;await c.addPlugin(n,i)}async function Z(c,i=!0){await H(c,i),await U(c,i)}export{Z as l};
