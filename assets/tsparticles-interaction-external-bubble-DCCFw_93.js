import{j as E,k as O,O as _,c as z,E as B,l as C,n as y,m as k,o as R,p as D,q as S,s as j,u as q,C as H,R as P,v as T,i as m,f as w,h as I}from"./tsparticles-engine-DLgpyJd2.js";class M{constructor(){this.distance=200,this.duration=.4,this.mix=!1}load(i){if(i){if(i.distance!==void 0&&(this.distance=i.distance),i.duration!==void 0&&(this.duration=i.duration),i.mix!==void 0&&(this.mix=i.mix),i.opacity!==void 0&&(this.opacity=i.opacity),i.color!==void 0){const e=E(this.color)?void 0:this.color;this.color=O(i.color,o=>_.create(e,o))}i.size!==void 0&&(this.size=i.size)}}}class A extends M{constructor(){super(),this.selectors=[]}get ids(){return O(this.selectors,i=>i.replace("#",""))}set ids(i){this.selectors=O(i,e=>`#${e}`)}load(i){super.load(i),i&&(i.ids!==void 0&&(this.ids=i.ids),i.selectors!==void 0&&(this.selectors=i.selectors))}}class L extends M{load(i){super.load(i),i&&(this.divs=O(i.divs,e=>{const o=new A;return o.load(e),o}))}}function x(d,i,e,o){if(i>=e){const s=d+(i-e)*o;return z(s,d,i)}else if(i<e){const s=d-(e-i)*o;return z(s,i,d)}}class W extends B{constructor(i){super(i),this._clickBubble=()=>{var b;const e=this.container,o=e.actualOptions,s=e.interactivity.mouse.clickPosition,n=o.interactivity.modes.bubble;if(!n||!s)return;e.bubble||(e.bubble={});const t=e.retina.bubbleModeDistance;if(!t||t<0)return;const u=e.particles.quadTree.queryCircle(s,t,l=>this.isEnabled(l)),{bubble:r}=e;for(const l of u){if(!r.clicking)continue;l.bubble.inRange=!r.durationEnd;const a=l.getPosition(),f=C(a,s),p=(new Date().getTime()-(e.interactivity.mouse.clickTime||0))/1e3;p>n.duration&&(r.durationEnd=!0),p>n.duration*2&&(r.clicking=!1,r.durationEnd=!1);const h={bubbleObj:{optValue:e.retina.bubbleModeSize,value:l.bubble.radius},particlesObj:{optValue:y(l.options.size.value)*e.retina.pixelRatio,value:l.size.value},type:"size"};this._process(l,f,p,h);const c={bubbleObj:{optValue:n.opacity,value:l.bubble.opacity},particlesObj:{optValue:y(l.options.opacity.value),value:((b=l.opacity)==null?void 0:b.value)??1},type:"opacity"};this._process(l,f,p,c),!r.durationEnd&&f<=t?this._hoverBubbleColor(l,f):delete l.bubble.color}},this._hoverBubble=()=>{const e=this.container,o=e.interactivity.mouse.position,s=e.retina.bubbleModeDistance;if(!s||s<0||o===void 0)return;const n=e.particles.quadTree.queryCircle(o,s,t=>this.isEnabled(t));for(const t of n){t.bubble.inRange=!0;const u=t.getPosition(),r=C(u,o),b=1-r/s;r<=s?b>=0&&e.interactivity.status===k&&(this._hoverBubbleSize(t,b),this._hoverBubbleOpacity(t,b),this._hoverBubbleColor(t,b)):this.reset(t),e.interactivity.status===R&&this.reset(t)}},this._hoverBubbleColor=(e,o,s)=>{const n=this.container.actualOptions,t=s??n.interactivity.modes.bubble;if(t){if(!e.bubble.finalColor){const u=t.color;if(!u)return;const r=D(u);e.bubble.finalColor=S(r)}if(e.bubble.finalColor)if(t.mix){e.bubble.color=void 0;const u=e.getFillColor();e.bubble.color=u?j(q(u,e.bubble.finalColor,1-o,o)):e.bubble.finalColor}else e.bubble.color=e.bubble.finalColor}},this._hoverBubbleOpacity=(e,o,s)=>{var a,f;const n=this.container,t=n.actualOptions,u=(s==null?void 0:s.opacity)??((a=t.interactivity.modes.bubble)==null?void 0:a.opacity);if(!u)return;const r=e.options.opacity.value,b=((f=e.opacity)==null?void 0:f.value)??1,l=x(b,u,y(r),o);l!==void 0&&(e.bubble.opacity=l)},this._hoverBubbleSize=(e,o,s)=>{const n=this.container,t=s!=null&&s.size?s.size*n.retina.pixelRatio:n.retina.bubbleModeSize;if(t===void 0)return;const u=y(e.options.size.value)*n.retina.pixelRatio,r=e.size.value,b=x(r,t,u,o);b!==void 0&&(e.bubble.radius=b)},this._process=(e,o,s,n)=>{const t=this.container,u=n.bubbleObj.optValue,r=t.actualOptions,b=r.interactivity.modes.bubble;if(!b||u===void 0)return;const l=b.duration,a=t.retina.bubbleModeDistance,f=n.particlesObj.optValue,p=n.bubbleObj.value,h=n.particlesObj.value||0,c=n.type;if(!(!a||a<0||u===f))if(t.bubble||(t.bubble={}),t.bubble.durationEnd)p&&(c==="size"&&delete e.bubble.radius,c==="opacity"&&delete e.bubble.opacity);else if(o<=a){if((p??h)!==u){const v=h-s*(h-u)/l;c==="size"&&(e.bubble.radius=v),c==="opacity"&&(e.bubble.opacity=v)}}else c==="size"&&delete e.bubble.radius,c==="opacity"&&delete e.bubble.opacity},this._singleSelectorHover=(e,o,s)=>{const n=this.container,t=document.querySelectorAll(o),u=n.actualOptions.interactivity.modes.bubble;!u||!t.length||t.forEach(r=>{const b=r,l=n.retina.pixelRatio,a={x:(b.offsetLeft+b.offsetWidth/2)*l,y:(b.offsetTop+b.offsetHeight/2)*l},f=b.offsetWidth/2*l,p=s.type==="circle"?new H(a.x,a.y,f):new P(b.offsetLeft*l,b.offsetTop*l,b.offsetWidth*l,b.offsetHeight*l),h=n.particles.quadTree.query(p,c=>this.isEnabled(c));for(const c of h){if(!p.contains(c.getPosition()))continue;c.bubble.inRange=!0;const g=u.divs,v=T(g,b);(!c.bubble.div||c.bubble.div!==b)&&(this.clear(c,e,!0),c.bubble.div=b),this._hoverBubbleSize(c,1,v),this._hoverBubbleOpacity(c,1,v),this._hoverBubbleColor(c,1,v)}})},i.bubble||(i.bubble={}),this.handleClickMode=e=>{e==="bubble"&&(i.bubble||(i.bubble={}),i.bubble.clicking=!0)}}clear(i,e,o){i.bubble.inRange&&!o||(delete i.bubble.div,delete i.bubble.opacity,delete i.bubble.radius,delete i.bubble.color)}init(){const i=this.container,e=i.actualOptions.interactivity.modes.bubble;e&&(i.retina.bubbleModeDistance=e.distance*i.retina.pixelRatio,e.size!==void 0&&(i.retina.bubbleModeSize=e.size*i.retina.pixelRatio))}async interact(i){const e=this.container.actualOptions,o=e.interactivity.events,s=o.onHover,n=o.onClick,t=s.enable,u=s.mode,r=n.enable,b=n.mode,l=o.onDiv;t&&m("bubble",u)?this._hoverBubble():r&&m("bubble",b)?this._clickBubble():w("bubble",l,(a,f)=>this._singleSelectorHover(i,a,f))}isEnabled(i){const e=this.container,o=e.actualOptions,s=e.interactivity.mouse,n=((i==null?void 0:i.interactivity)??o.interactivity).events,{onClick:t,onDiv:u,onHover:r}=n,b=I("bubble",u);return b||r.enable&&s.position||t.enable&&s.clickPosition?m("bubble",r.mode)||m("bubble",t.mode)||b:!1}loadModeOptions(i,...e){i.bubble||(i.bubble=new L);for(const o of e)i.bubble.load(o==null?void 0:o.bubble)}reset(i){i.bubble.inRange=!1}}async function $(d,i=!0){await d.addInteractor("externalBubble",e=>new W(e),i)}export{$ as l};
